<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style>
            .CodeMirror {
              height: auto !important;
              margin: 1em 0;
            }

            .CodeMirror-scroll {
              height: auto !important;
              overflow: visible !important;
            }
          </style><title>Deferred Rendering - WebGPU Samples</title><meta name="description" content="This example shows how to do deferred rendering with webgpu.
      Render geometry info to multiple targets in the gBuffers in the first pass.
      In this sample we have 2 gBuffers for normals and albedo, along with a depth texture.
      And then do the lighting in a second pass with per fragment data read from gBuffers so it&#x27;s independent of scene complexity.
      World-space positions are reconstructed from the depth texture and camera matrix.
      We also update light position in a compute shader, where further operations like tile/cluster culling could happen.
      The debug view shows the depth buffer on the left (flipped and scaled a bit to make it more visible), the normal G buffer
      in the middle, and the albedo G-buffer on the right side of the screen.
      "/><meta http-equiv="origin-trial"/><meta name="next-head-count" content="6"/><link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.css" rel="stylesheet"/><link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/monokai.min.css" rel="stylesheet"/><meta http-equiv="origin-trial" content="Ajk6hJ+H2On45QTvVPJLRgjt+S01bdGuXXSu9Oci5oOcypHiuDPM6hW5Wp1GRegFTOU77li5tYRZrhp+RN2ZYgAAAABQeyJvcmlnaW4iOiJodHRwczovL3dlYmdwdS5naXRodWIuaW86NDQzIiwiZmVhdHVyZSI6IldlYkdQVSIsImV4cGlyeSI6MTY5MTcxMTk5OX0="/><link rel="icon" type="image/x-icon" href="/webgpu-samples/favicon.ico"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/webgpu-samples/_next/static/css/3544aa14212c3a30.css" as="style"/><link rel="stylesheet" href="/webgpu-samples/_next/static/css/3544aa14212c3a30.css" data-n-g=""/><link rel="preload" href="/webgpu-samples/_next/static/css/dd2e6def0b19e984.css" as="style"/><link rel="stylesheet" href="/webgpu-samples/_next/static/css/dd2e6def0b19e984.css"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/webgpu-samples/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/webgpu-samples/_next/static/chunks/f65a48b9.cb726e3375d78743.js"></script><script defer="" src="/webgpu-samples/_next/static/chunks/b8074065.9c81e039aea18b75.js"></script><script defer="" src="/webgpu-samples/_next/static/chunks/a9a291b3.f7df926320f0d5b0.js"></script><script defer="" src="/webgpu-samples/_next/static/chunks/82.11cc5015dacb0457.js"></script><script defer="" src="/webgpu-samples/_next/static/chunks/704.cd24c3a6bb1f49fc.js"></script><script src="/webgpu-samples/_next/static/chunks/webpack-5f8c9cd3dc9364df.js" defer=""></script><script src="/webgpu-samples/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/webgpu-samples/_next/static/chunks/main-6fe3c393ddfa4534.js" defer=""></script><script src="/webgpu-samples/_next/static/chunks/pages/_app-5e49c72c639c4b91.js" defer=""></script><script src="/webgpu-samples/_next/static/chunks/pages/samples/%5Bslug%5D-ea943101c4de1afe.js" defer=""></script><script src="/webgpu-samples/_next/static/um7Vob07qBXC-7TtBPMuf/_buildManifest.js" defer=""></script><script src="/webgpu-samples/_next/static/um7Vob07qBXC-7TtBPMuf/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css?family=Inconsolata&display=swap">@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8WR32kQ.woff) format('woff')}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8WRL2kXWdycuJDETf.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8WRP2kXWdycuJDETf.woff) format('woff');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8WR32kXWdycuJDA.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="MainLayout_wrapper__eI_HE"><nav class="MainLayout_panel__GdjKj MainLayout_container__l_Vkn" data-expanded="false"><h1><a href="/webgpu-samples">WebGPU Samples</a><div class="MainLayout_expand__FEWWW"></div></h1><div class="MainLayout_panelContents__w1BWs"><a href="https://github.com/webgpu/webgpu-samples">Github</a><hr/><ul class="MainLayout_exampleList__FHCmd"><li><a href="/webgpu-samples/samples/helloTriangle">helloTriangle</a></li><li><a href="/webgpu-samples/samples/helloTriangleMSAA">helloTriangleMSAA</a></li><li><a href="/webgpu-samples/samples/resizeCanvas">resizeCanvas</a></li><li><a href="/webgpu-samples/samples/rotatingCube">rotatingCube</a></li><li><a href="/webgpu-samples/samples/twoCubes">twoCubes</a></li><li><a href="/webgpu-samples/samples/texturedCube">texturedCube</a></li><li><a href="/webgpu-samples/samples/instancedCube">instancedCube</a></li><li><a href="/webgpu-samples/samples/fractalCube">fractalCube</a></li><li><a href="/webgpu-samples/samples/cameras">cameras</a></li><li><a href="/webgpu-samples/samples/cubemap">cubemap</a></li><li><a href="/webgpu-samples/samples/computeBoids">computeBoids</a></li><li><a href="/webgpu-samples/samples/animometer">animometer</a></li><li><a href="/webgpu-samples/samples/videoUploading">videoUploading</a></li><li><a href="/webgpu-samples/samples/videoUploadingWebCodecs">videoUploadingWebCodecs</a></li><li><a href="/webgpu-samples/samples/samplerParameters">samplerParameters</a></li><li><a href="/webgpu-samples/samples/imageBlur">imageBlur</a></li><li><a href="/webgpu-samples/samples/shadowMapping">shadowMapping</a></li><li><a href="/webgpu-samples/samples/reversedZ">reversedZ</a></li><li class="MainLayout_selected__Yjoh0"><a href="/webgpu-samples/samples/deferredRendering">deferredRendering</a></li><li><a href="/webgpu-samples/samples/particles">particles</a></li><li><a href="/webgpu-samples/samples/cornell">cornell</a></li><li><a href="/webgpu-samples/samples/gameOfLife">gameOfLife</a></li><li><a href="/webgpu-samples/samples/renderBundles">renderBundles</a></li><li><a href="/webgpu-samples/samples/worker">worker</a></li><li><a href="/webgpu-samples/samples/A-buffer">A-buffer</a></li><li><a href="/webgpu-samples/samples/bitonicSort">bitonicSort</a></li></ul><hr/><h3>Other Pages</h3><ul class="MainLayout_exampleList__FHCmd"><li><a rel="noreferrer" target="_blank" href="/webgpu-samples/workload-simulator.html">Workload Simulator ↗️</a></li></ul></div></nav><main><div><h1>Deferred Rendering</h1><a target="_blank" rel="noreferrer" href="https://github.com/webgpu/webgpu-samples/tree/main/src/sample/deferredRendering/main.ts">See it on Github!</a><p>This example shows how to do deferred rendering with webgpu.
      Render geometry info to multiple targets in the gBuffers in the first pass.
      In this sample we have 2 gBuffers for normals and albedo, along with a depth texture.
      And then do the lighting in a second pass with per fragment data read from gBuffers so it&#x27;s independent of scene complexity.
      World-space positions are reconstructed from the depth texture and camera matrix.
      We also update light position in a compute shader, where further operations like tile/cluster culling could happen.
      The debug view shows the depth buffer on the left (flipped and scaled a bit to make it more visible), the normal G buffer
      in the middle, and the albedo G-buffer on the right side of the screen.
      </p></div><div class="SampleLayout_canvasContainer__zRR_l"><div style="position:absolute;left:10px"></div><div style="position:absolute;right:10px"></div><canvas></canvas></div><div><nav class="SampleLayout_sourceFileNav__ml48P"><ul><li><a href="#main.ts" data-active="false">main.ts</a></li><li><a href="#vertexWriteGBuffers.wgsl" data-active="false">vertexWriteGBuffers.wgsl</a></li><li><a href="#fragmentWriteGBuffers.wgsl" data-active="false">fragmentWriteGBuffers.wgsl</a></li><li><a href="#vertexTextureQuad.wgsl" data-active="false">vertexTextureQuad.wgsl</a></li><li><a href="#fragmentGBuffersDebugView.wgsl" data-active="false">fragmentGBuffersDebugView.wgsl</a></li><li><a href="#fragmentDeferredRendering.wgsl" data-active="false">fragmentDeferredRendering.wgsl</a></li><li><a href="#lightUpdate.wgsl" data-active="false">lightUpdate.wgsl</a></li></ul></nav><div class="SampleLayout_sourceFileContainer__3s84x" data-active="false"><div></div></div><div class="SampleLayout_sourceFileContainer__3s84x" data-active="false"><div></div></div><div class="SampleLayout_sourceFileContainer__3s84x" data-active="false"><div></div></div><div class="SampleLayout_sourceFileContainer__3s84x" data-active="false"><div></div></div><div class="SampleLayout_sourceFileContainer__3s84x" data-active="false"><div></div></div><div class="SampleLayout_sourceFileContainer__3s84x" data-active="false"><div></div></div><div class="SampleLayout_sourceFileContainer__3s84x" data-active="false"><div></div></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"deferredRendering"},"__N_SSG":true},"page":"/samples/[slug]","query":{"slug":"deferredRendering"},"buildId":"um7Vob07qBXC-7TtBPMuf","assetPrefix":"/webgpu-samples","isFallback":false,"dynamicIds":[9704],"gsp":true,"scriptLoader":[]}</script></body></html>